<mvc:View
	controllerName="sap.demo.StockList.controller.StockList"
	xmlns:html="http://www.w3.org/1999/xhtml"
	xmlns:mvc="sap.ui.core.mvc"
	xmlns="sap.m"
	xmlns:core="sap.ui.core"
>

	<App>
		<pages>
			<Page
				title="{i18n>LIST_TITLE}"
				id="mainPageList"
				showNavButton="false"
				navButtonPress="handleNavBack"
				enableScrolling="true"
			>
				<headerContent>
					<core:Fragment fragmentName="sap.demo.StockList.view.HeaderContent" type="XML" />
				</headerContent>
				<subHeader>
					 <Bar id="orderProductsBarSearch" >
                        <contentLeft>
							<SearchField 
								id="stockListSearchFieldProduct"
								width="85%"
								search="onLiveSearch"
								liveChange="onLiveSearch"
								showRefreshButton="true"
								selectOnFocus="false"
								placeholder="単品検索"
							>
							</SearchField>
							<Button
								id="stockListBtnForDialog"
								icon="sap-icon://bar-code"
								press="onOpenDialog"
		                	/>
						 </contentLeft>
                    </Bar>
				</subHeader>
				<content>
					<List
						id="stockListListStock"
						growing="false"
						growingThreshold="10"
						busyIndicatorDelay="500"
						enableBusyIndicator="true"
						noDataText="{i18n>COM_NODATA_TEXT}"
						mode="SingleSelectMaster"
						selectionChange="onSelect"
						includeItemInSelection="true"
						items="{
							path : 'listData>/StockList'
						}">
						<headerToolbar>
							<Toolbar>
								<HBox width="100%">
									<Label text="絞込：" class="sapUiSmallMarginTop sapUiSmallMarginBottom" />
									<FacetFilter
										id="stockListFacetFilterStyle2"
										type="Simple"
										lists="{listData>/ListFilter}"
										liveSearch="true"
										showPersonalization="false"
										showReset="true"
										reset="onFacetFilterReset">
										<lists>
											<FacetFilterList
												title="{listData>type}"
												items="{listData>values}"
												key="{listData>data}"
												mode="SingleSelectMaster"
												listOpen="onFacetFilterListOpen"
												listClose="onFacetFilterListClose">
												<items>
													<FacetFilterItem
														key="{listData>data}"
														text="{listData>text}"
													/>
												</items>
											</FacetFilterList>
										</lists>
									</FacetFilter>
								</HBox>
							</Toolbar>
						</headerToolbar>
						<ObjectListItem
							id="stockListobjListItemStockListList"
							title="{listData>Product}"
							type="Active"
							number="{
								path : 'listData>ProductStock',
								formatter : 'sap.demo.StockList.util.common.setCammaForNumber'
							}"
							numberUnit="{listData>ProductStockUnit}" >
						<attributes>
							<ObjectAttribute text="{listData>ProductName}" />
							<ObjectAttribute text="{listData>ProductSupplier}" />
							<ObjectAttribute text="{listData>ProductColor}　{listData>ProductSize}" />
							<ObjectAttribute text="{listData>ProductColorSupplier}　{listData>ProductSizeSupplier}" />
							<ObjectAttribute
								text="{
									path : 'listData>ProductPrice',
									formatter : 'sap.demo.StockList.util.common.setCammaForNumber'
								} {listData>Currency}"
							/>
						</attributes>
						</ObjectListItem>
					</List>
				</content>
			</Page>
		</pages>
	</App>

</mvc:View>