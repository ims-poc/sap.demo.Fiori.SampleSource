<mvc:View
    controllerName="sap.demo.OrderProducts.controller.ProductList"
    xmlns:core="sap.ui.core"
    xmlns:l="sap.ui.layout"
    xmlns:f="sap.ui.layout.form"
    xmlns:u="sap.ui.unified"
    xmlns:html="http://www.w3.org/1999/xhtml"
    xmlns:mvc="sap.ui.core.mvc"
	xmlns="sap.m">
    
	<App>
		<pages>
			<Page id="mainListPage" title="">
                <headerContent>
                    <!--<Button id="orderProductsButtonUp" icon="sap-icon://up" press="onUpPress" enabled="false" />-->
                    <!--<Button id="orderProductsButtonDown" icon="sap-icon://down" press="onDownPress" enabled="false" />-->
                    <Button id="orderProductsBtnSelectStore" icon="sap-icon://value-help" tooltip="Select Store" press="onValueHelpRequest" />
                </headerContent>
    
                <subHeader>
                    <Bar id="orderProductsBarSearch" >
                        <contentLeft>
                            <SearchField width="95%"
                                search="onLiveSearch"
                                liveChange="onLiveSearch"
                                showRefreshButton="true"
                                selectOnFocus="false"
                                placeholder="単品検索"
                                id="orderProductsSearchFieldProducts">
                            </SearchField>
                            <Button
								id="orderProductsButtonForDialog"
								icon="sap-icon://bar-code"
								press="onOpenDialog"
                        	/>
                        </contentLeft>
                    </Bar>
                </subHeader>

                <content>
                    <Table
                        id="orderProductsTableProducts"
                        inset="false"
                        growing="false"
						growingThreshold="10"
						busyIndicatorDelay="500"
						enableBusyIndicator="true"
						fixedLayout="false"
                        noDataText="No Data"
                        showUnread="true"
                        mode="SingleSelectMaster"
                        visible="true"
                        selectionChange="onSelectionChange"
                        growingScrollToLoad="false"
                        updateFinished="onListUpdateFinished"
                        items="{
                            path: 'listData>/ProductCollection'
                        }"
                    >
						<headerToolbar>
							<Toolbar>
								<HBox width="100%">
									<Label id="orderProductsLblFilter2" text="{i18n>TITLE_FILTER}" class="sapUiSmallMarginTop sapUiSmallMarginBottom" />
									<FacetFilter
										id="orderProductsFacetFilter2"
										type="Simple"
										lists="{listData>/ProductCollectionStats/Filters}"
										liveSearch="true"
										showPersonalization="false"
										showReset="true"
										reset="onFacetFilterReset">
										<lists>
											<FacetFilterList
												title="{listData>type}"
												growing="false"
												items="{listData>values}"
												key="{listData>filterKey}"
												listOpen="onFacetFilterListOpen"
												listClose="setFilter">
												<items>
													<FacetFilterItem
														key="{listData>data}"
														text="{listData>text}"
													/>
												</items>
											</FacetFilterList>
										</lists>
									</FacetFilter>
								</HBox>
							</Toolbar>
						</headerToolbar>
                        <columns>
                            <Column vAlign="Middle" id="orderProductsColumnProduct">
                                <Label text="{i18n>TITLE_PRODUCT}" />
                            </Column>
                            <Column vAlign="Middle" id="orderProductsColumnProductColor">
                            	<Label text="{i18n>TITLE_PRODUCT_COLOR}" />
                            </Column>
                            <Column vAlign="Middle" id="orderProductsColumnProductSize">
                            	<Label text="{i18n>TITLE_PRODUCT_SIZE}" />
                            </Column>
                            <Column vAlign="Middle" id="orderProductsColumnOrderQuantity" hAlign="Right">
                                <Label text="{i18n>TITLE_ORDER_QUANTITY}" />
                            </Column>
                            <Column vAlign="Middle" id="orderProductsColumnStockQuantity" hAlign="Right">
                                <Label text="{i18n>TITLE_STOCK_QUANTITY}" />
                            </Column>
                            <Column vAlign="Middle" id="orderProductsColumnScheduledQuantity" hAlign="Right">
                                <Label text="{i18n>TITLE_SCHEDULED_QUANTITY}" />
                            </Column>
                            <Column vAlign="Middle" id="orderProductsColumnSalesPrice" hAlign="Right">
                                <Label text="{i18n>TITLE_SALES_PRICE}" />
                            </Column>
                        </columns>
                        
                        <items>
                            <ColumnListItem id="ColListItm" vAlign="Top">
                                <cells>
                                    <VBox id="orderProductsVBoxProductAttributes">
                                        <!--<Link text="{listData>ProductName}" id="orderProductsTextProductName" wrapping="true" press="navigate" />-->
                                        <!--<Text text="{listData>Product}" id="orderProductsTextProductID" />-->
                                        <Link text="{listData>Product}" id="orderProductsTextProductID" class="sampleStyle" press="navigate" />
                                        <Text text="{listData>ProductName}" id="orderProductsTextProductName" />
                                        <Text text="{listData>ProductForSupplier}" id="orderProductsTextProductIDForSupplier" />
                                    </VBox>
                                    <Text id="orderProductsTextProductColor" text="{listData>ProductColor}" />
                                    <Text id="orderProductsTextProductSize" text="{listData>ProductSize}" />
                                    <HBox id="orderProductsHBoxOrderQuantityTablet" justifyContent="End">
                                        <Input
											id="orderProductsInputProductOrder"
											type="Number"
											textAlign="Right"
											maxLength="4"
											showValueStateMessage="false"
                                            value="{
                                            	path : 'listData>ProductOrder',
                                            	formatter : 'sap.demo.OrderProducts.util.common.setCammaForNumber'
                                            }"
                                            width="4em"
                                            change="onOrderQuantityChange"
                                            liveChange="onOrderQuantityLiveChange"
                                            enabled="{view>/inputEnabled}"
                                        />
                                        <HBox width="0.5em" />
                                        <Text id="orderProductsTextQuantityUnitTablet" wrapping="false" text="{listData>ProductOrderUnit}" class="sapUiSmallMarginTop sapUiSmallMarginBottom" />
                                    </HBox>
                                    <Text id="orderProductsTextStockQuantity"
										text="{
											path : 'listData>ProductStock',
											formatter : 'sap.demo.OrderProducts.util.common.setCammaForNumber'
										} {listData>ProductStockUnit}"
                                    />
                                    <Text id="orderProductsTextScheduledQuantity"
										text="{
											path : 'listData>ProductScheduledStock',
											formatter : 'sap.demo.OrderProducts.util.common.setCammaForNumber'
										} {listData>ProductScheduledStockUnit}" />
                                    <u:Currency value="{listData>ProductPrice}" currency="{listData>Currency}" useSymbol="false" maxPrecision="1" />
                                </cells>
                            </ColumnListItem>
                        </items>
                    </Table>
                </content>
                <footer>
                    <core:Fragment fragmentName="sap.demo.OrderProducts.view.FooterContent" type="XML" />
                </footer>
            </Page>
		</pages>
	</App>
</mvc:View>